syntax = "proto3";

package interactionpb;

// service Interactionv2 { // å®¢æˆ·ç«¯è°ƒç”¨æ¥å£
//     rpc InteractionBeginNotify (InteractionBeginNotifyRequest) returns (InteractionBeginNotifyResponse) {}; // æ•™å®¤ç«¯å¼€å§‹äº’åŠ¨é€šçŸ¥,æœåŠ¡ç«¯å¯ä»¥åšä¸€äº›å‡†å¤‡å¤„ç†,ä»¥åŠè¯¾ç¨‹çŠ¶æ€çš„å˜æ›´(ä¾‹å¦‚:å¼€å§‹ä¸€ä¸ªæ¿ä¸‹æ´»åŠ¨,è®¾ç½®ä¸ºä¸»æ•™è¯¾æ“ä½œæ—¶é—´)
//     rpc InteractionEndNotify (InteractionEndNotifyRequest) returns (InteractionEndNotifyResponse) {}; // æ•™å®¤ç«¯ç»“æŸäº’åŠ¨é€šçŸ¥,æ•°æ®æ¸…ç†,çŠ¶æ€å˜æ›´
   
//     rpc StartInteraction (StartInteractionRequest) returns (StartInteractionResponse) {}; // æ•™å®¤ç«¯æ­£å¼å¼€å§‹äº’åŠ¨,å¤šè½®æ¬¡çš„äº’åŠ¨ä¼šå¤šè¯è°ƒç”¨
//     rpc StopInteraction (StopInteractionRequest) returns (StopInteractionResponse) {}; // æš‚æ—¶æ²¡ç”¨
//     rpc ReportVoice (ReportVoiceRequest) returns (ReportGestureResponse) {};    // æ‰‹è¡¨ç«¯ä¸Šä¼ è¯­éŸ³æ•°æ®
//     rpc ReportGesture (ReportGestureRequest) returns (ReportGestureResponse) {};    // æ‰‹è¡¨ç«¯ä¸Šä¼ ä½“æ„Ÿæ•°æ®,ä¼ åŒ¹é…å¥½åçš„å€¼
//     rpc ReportGestureWithMetadata (ReportGestureWithMetadataRequest) returns (ReportGestureWithMetadataResponse) {};  // æ‰‹è¡¨ç«¯ä¼ ä½“æ„Ÿæ•°æ®,ä¼ åŸå§‹é‡‡é›†æ•°æ®
// }

// äº’åŠ¨ç±»å‹
enum InteractionType {
    UnknowmInteractionType  = 0;
    MotionSensing           = 1; // ä½“æ„Ÿ
    Voice                   = 2; // è¯­éŸ³
}

// å­¦ç”Ÿç«¯æ“ä½œç±»å‹
enum StudentOptType {
    UnknownStudentOptType   = 0;     // æœªçŸ¥ç±»å‹
    ClapHands               = 1;     // æ‹æ‰‹ğŸ‘
    PatLeg                  = 2;     // æ‹è…¿
}

message CommonResponse {
    uint32  errcode = 1;
    string  message = 2;
}

// å¼€å§‹ä¸€ä¸ªäº’åŠ¨
message StartInteractionNtf {
    int64           lesson_id       = 1; // è¯¾å ‚ID
    int64           interaction_id  = 2; // äº’åŠ¨ID
    int32           task_id         = 3; // å­åºå·
    InteractionType type            = 4; // 1ä½“æ„Ÿ, 2è¯­éŸ³
    int64           duration        = 5; // äº’åŠ¨æ€»æŒç»­æ—¶é—´
    int64           interval        = 6; // æ‰‹è¡¨é‡‡é›†æ•°æ®æ—¶é—´
    string          text            = 7; // è¯­éŸ³æ–‡æœ¬
    int32           textType        = 8; // æ–‡æœ¬ç±»å‹ 1: å•è¯, 2: å¥å­
    int32           method          = 9; // é‡‡é›†æ–¹æ³•: 1:æŒç»­ä¸Šä¼ , 2:ä¸Šé€æœ€ä½³åˆ†æ•°
}

// ä¸»æ•™ç«¯å‘èµ·ä¸€ä¸ªäº’åŠ¨  ä¸»æ•™ç«¯æ‰‹åŠ¨å‘èµ·äº’åŠ¨å,æŠŠäº’åŠ¨é…ç½®é€šè¿‡è¿™æ¡æ¶ˆæ¯æ¨é€ç»™æ•™å®¤ç«¯,æ•™å®¤ç«¯æ‹¿åˆ°é…ç½®å,æŒ‰å¸¸è§„äº’åŠ¨æµç¨‹èµ°,
//  ManualStartInteractionNtf.interaction ä¸ºäº’åŠ¨æ¨¡æ¿çš„jsonå­—ç¬¦ä¸²,è§£ææˆjsonåä¸è¯¾ä»¶é…ç½®è¡¨é‡Œçš„Templateç»“æ„ä¸€è‡´
message ManualStartInteractionNtf {
    string  interaction = 1;
}

// æ•™å®¤ç«¯æ ¹æ®è§†é¢‘æ’­æ”¾æ—¶é—´è‡ªåŠ¨å‘èµ·çš„äº’åŠ¨
message AutoStartInteractionNtf {
    string  interaction = 1;
    bool    isMonopoly  = 2; // æ˜¯å¦ä¸ºå¤§å¯Œç¿
}

// æ•™å®¤ç«¯æ ¹æ®è§†é¢‘æ’­æ”¾æ—¶é—´è‡ªåŠ¨ç»“æŸäº’åŠ¨
message AutoFinishInteractionNtf {
    int64   interaction_id  = 1;
    bool    isMonopoly      = 2; // æ˜¯å¦ä¸ºå¤§å¯Œç¿
}

// InteractionNextStepNtf äº’åŠ¨åˆ‡æ¢åˆ°ä¸‹ä¸€æ­¥
message InteractionNextStepNtf {
    int64   interaction_id   = 1;
}

// ChangeARSceneNtf ARåˆ‡æ¢åœºæ™¯
message ChangeARSceneNtf{
    int64   interaction_id  = 1;
    int32   task_id         = 2;
}


// åœæ­¢ä¸€ä¸ªäº’åŠ¨
message StopInteractionNtf {
    int64   interaction_id   = 1;
}

// æˆªå±é€šçŸ¥
message StartScreenshotNtf {
    string fileName = 1;
}

// å½•å±é€šçŸ¥
message StartScreenRecordNtf {
    int64   time        = 1; // å½•å±æ—¶é—´
    string  fileName    = 2; // æ–‡ä»¶åç§°
}

// å­¦ç”Ÿç«¯æ“ä½œé€šçŸ¥
message StudentOperationNtf {
    int64       interaction_id  = 1; // äº’åŠ¨ID
    int64       student_id      = 2; // å­¦ç”ŸID 
    string      name            = 3; // å­¦ç”Ÿåç§°
    string      avatar_url      = 4; // å¤´åƒ
    int64       type            = 5; // äº’åŠ¨ç±»å‹       
    int64       value           = 6; // äº’åŠ¨æ•°å€¼
    int64       star            = 8; // è¯¥æ¬¡äº’åŠ¨æ˜Ÿæ˜Ÿæ•°
    int32       task_id         = 9; // ä»»åŠ¡ID
    string      text            = 10; // æœ¬æ¬¡è¯»éŸ³å¯¹åº”çš„æ–‡æœ¬
    int32       textIndex       = 11; // è¯»å¤šä¸ªå•è¯æ—¶çš„ç´¢å¼•
}

// ä¸»æ•™ç«¯å¥–åŠ±å­¦ç”Ÿæ˜Ÿæ˜Ÿé€šçŸ¥
message RewardStudentNtf {
    int64       studentID   = 1; // å­¦ç”ŸID 
    string      name        = 2; // å­¦ç”Ÿåç§°
    string      avatarURL   = 3; // å¤´åƒ
    int64       star        = 4; // å¥–åŠ±æ˜Ÿæ˜Ÿæ•°
    int32       showType    = 5; // æ•ˆæœç±»å‹
}


// æ‰‹è¡¨ä¸Šé€è¯­éŸ³æ•°æ®
// Flow watch -> server
message WatchReportVoiceRequest {
    int64   lessonID        = 1;
    int64   classID         = 2;
    int64   interactionID   = 3;
    int32   taskID          = 4;
    int64   studentID       = 5;
    string  text            = 6;
    int64   value           = 7;
}

// æ‰‹è¡¨ä¸Šé€è¯­éŸ³æ•°æ®å“åº”
// Flow watch <- server
message WatchReportVoiceResponse {
    CommonResponse respone  = 1;
}

// æ‰‹è¡¨ä¸Šé€æ‰‹åŠ¿æ•°æ®
// Flow watch -> server
message WatchReportGestureRequest {
    int64   lessonID        = 1;
    int64   classID         = 2;
    int64   interactionID   = 3;
    int32   taskID          = 4;
    int64   studentID       = 5;
    int64   value           = 6;
}

// æ‰‹è¡¨ä¸Šé€æ‰‹åŠ¿æ•°æ®å“åº”
// Flow watch <- server
message WatchReportGestureResponse {
    CommonResponse respone  = 1;
}

// æ‰‹è¡¨ä¸Šé€æ‰‹åŠ¿æ•°æ®(ä¸Šé€åŸå§‹æ•°æ®)
// Flow watch -> server
message WatchReportGestureWithMetadataRequest {
    int64           lessonID        = 1;
    int64           classID         = 2;
    int64           interactionID   = 3;
    int32           taskID          = 4;
    int64           studentID       = 5;
    repeated double timeSeries      = 6;
    repeated double timeLine        = 7;
}

// æ‰‹è¡¨ä¸Šé€æ‰‹åŠ¿æ•°æ®å“åº”
// Flow watch <- server
message WatchReportGestureWithMetadataResponse {
    CommonResponse respone  = 1;
}

// æ•™å®¤ç«¯äº’åŠ¨å¼€å§‹é€šçŸ¥
// Flow classkit -> server
message InteractionBeginNotify {
    int64   lessonID        = 1;
    int64   classID         = 2;
    int64   interactionID   = 3;
    string  config          = 4;
}

message InteractionBeginNotifyResponse {
    CommonResponse respone  = 1;
}

// æ•™å®¤ç«¯äº’åŠ¨ç»“æŸé€šçŸ¥
// Flow classkit -> servers
message InteractionEndNotify {
    int64   lessonID        = 1;
    int64   classID         = 2;
    int64   interactionID   = 3;
}

// æ•™å®¤ç«¯å¼€å§‹ä¸€ä¸ªäº’åŠ¨
// Flow classkit -> server
message ClasskitStartInteractionRequest {
    int64   lessonID        = 1;
    int64   classID         = 2;
    int64   interactionID   = 3;
    int32   taskID          = 4;
    string  config          = 5;
}

message InteractionEndNotifyResponse {
    CommonResponse respone  = 1;
}

// æ•™å®¤ç«¯å¼€å§‹ä¸€ä¸ªäº’åŠ¨å“åº”
// Flow classkit <- server
message ClasskitStartInteractionResponse {
    CommonResponse respone  = 1;
}


/*Add By Peter For New Server*/
message ReportGestureWithMetadataRequest {
    int64           lessonID        = 1;
    int64           classID         = 2;
    int64           interactionID   = 3;
    int32           taskID          = 4;
    int64           studentID       = 5;
    repeated double timeSeries      = 6;
    repeated double timeLine        = 7;
}



message ReportGestureWithMetadataResponse {
    CommonResponse respone  = 1;
}


/*Add By Peter For New Server End*/
